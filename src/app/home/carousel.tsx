"use client";

import { useEffect, useRef, useState } from "react";

import Image from "next/image";
import Tag from "../tag";

import "./carousel.css";

export default function Carousel(props: {
  className: string;
}) {
  const items = [
    {
      title: "Mobile Development",
      description: "Like a digital chef, I blend ingredients of raw data, seasoning with statistical methods, and serve up mouth-watering insights that decision-makers cannot resist",
      tags: ["Java", "Kotlin", "Jetpack Compose", "Firebase", "Mockito"]
    },
    {
      title: "Web Development",
      description: "Like a digital chef, I blend ingredients of raw data, seasoning with statistical methods, and serve up mouth-watering insights that decision-makers cannot resist",
      tags: ["HTML", "CSS", "Typescript", "React.js", "Tailwind", "Spring Boot"],
    },
    {
      title: "Data Analysis",
      description: "Like a digital chef, I blend ingredients of raw data, seasoning with statistical methods, and serve up mouth-watering insights that decision-makers cannot resist",
      tags: ["Python", "MS Excel", "PostgreSQL", "SAS", "Jupyter Notebook"]
    },
  ];

  const colorInactive: string = "bg-gray-300";
  const colorActive: string = "bg-blue-500";

  const [activeIndex, setActiveIndex] = useState(2);

  const carouselDivRef = useRef<HTMLDivElement>(null);

  const carouselDiv = carouselDivRef.current;

  const updateIndex = () => {
    if (carouselDiv) {
      let index = Math.round(carouselDiv.scrollLeft / carouselDiv.clientWidth);
      setActiveIndex(index);
      }
  };


  useEffect(() => {

    if (carouselDiv) {
      carouselDiv.addEventListener('scroll', updateIndex);
    }

    return () => {
      if (carouselDiv) {
        carouselDiv.removeEventListener('scroll', updateIndex);
      }
    };
  }, []);



  return (
    <div className={`${props.className} relative flex flex-col gap-y-6 items-center `}>

      <div ref={carouselDivRef} className="w-full flex flex-row gap-x-6 z-0 lg:gap-x-12 justify-between overflow-x-auto snap-x snap-mandatory scroll-smooth scrollbar-hide">
          {items.map((item, index) => (

            <div key={index} className="carousel-item flex flex-col shrink-0 lg:shrink gap-y-2 px-4 py-8 rounded text-center items-center snap-center" onClick={() => null}>

              <div className="flex flex-row">

                <svg viewBox="0 0 100 110" className={`${index == 0 ? 'block' : 'hidden'} w-20 h-20 fill-current text-white`}>
                    <path d="M76.76,6.22H23.24a4.55,4.55,0,0,0-4.55,4.54V89.24a4.55,4.55,0,0,0,4.55,4.54H76.76a4.55,4.55,0,0,0,4.55-4.54V10.76A4.55,4.55,0,0,0,76.76,6.22Zm2.55,83a2.55,2.55,0,0,1-2.55,2.54H23.24a2.55,2.55,0,0,1-2.55-2.54V10.76a2.55,2.55,0,0,1,2.55-2.54H76.76a2.55,2.55,0,0,1,2.55,2.54Z" />
                    <path d="M71.7,12.22H28.3a3.61,3.61,0,0,0-3.61,3.61V80.52a3.61,3.61,0,0,0,3.61,3.61H71.7a3.61,3.61,0,0,0,3.61-3.61V15.83A3.61,3.61,0,0,0,71.7,12.22Zm1.61,68.3a1.62,1.62,0,0,1-1.61,1.61H28.3a1.62,1.62,0,0,1-1.61-1.61V15.83a1.61,1.61,0,0,1,1.61-1.61H71.7a1.61,1.61,0,0,1,1.61,1.61Z" />
                    <path d="M50,85.1A2.85,2.85,0,1,0,52.85,88,2.86,2.86,0,0,0,50,85.1Z" />
                    <path d="M71,33.19l-13-7.48a1,1,0,0,0-1.37.36,1,1,0,0,0,.37,1.37l11.47,6.62L57.05,40.68a1,1,0,0,0,1,1.74l13-7.49a1,1,0,0,0,0-1.74Z" />
                    <path d="M42.7,42.55a1,1,0,0,0,.86-.5,1,1,0,0,0-.36-1.37L31.72,34.06,43.2,27.44a1,1,0,0,0,.36-1.37,1,1,0,0,0-1.36-.36l-13,7.48a1,1,0,0,0,0,1.74l13,7.49A1,1,0,0,0,42.7,42.55Z" />
                    <path d="M42.3,52a.93.93,0,0,0,.4.09,1,1,0,0,0,.91-.6l14.85-34a1,1,0,0,0-1.83-.8L41.78,50.73A1,1,0,0,0,42.3,52Z" />
                    <path d="M68.74,57.36H56.16a1,1,0,0,0,0,2H68.74a1,1,0,0,0,0-2Z" />
                    <path d="M50.66,59.36a1,1,0,0,0,0-2H42.59a1,1,0,0,0,0,2Z" />
                    <path d="M31.26,59.36h6.49a1,1,0,0,0,0-2H31.26a1,1,0,0,0,0,2Z" />
                    <path d="M31.26,67.79H53.32a1,1,0,1,0,0-2H31.26a1,1,0,0,0,0,2Z" />
                    <path d="M68.74,65.79H59.08a1,1,0,0,0,0,2h9.66a1,1,0,0,0,0-2Z" />
                    <path d="M68.74,73.5H31.26a1,1,0,0,0,0,2H68.74a1,1,0,1,0,0-2Z" />
                  </svg>

                <svg viewBox="0 0 100 100" className={`${index == 1 ? 'block' : 'hidden'} w-20 h-20 fill-current text-white`}>
                    <path d="m26.297 52.203c-0.1875 0-0.39062-0.078125-0.53125-0.21875l-6.5312-6.3125c-0.15625-0.14062-0.23438-0.34375-0.23438-0.54688s0.078125-0.40625 0.23438-0.54688l6.5312-6.375c0.3125-0.29688 0.79688-0.29688 1.0938 0.015625 0.29688 0.29688 0.29688 0.79688-0.015625 1.0938l-5.9688 5.8281 5.9531 5.7656c0.3125 0.29688 0.3125 0.78125 0.015625 1.0938-0.14062 0.125-0.34375 0.20312-0.54688 0.20312z" />
                    <path d="m28.828 55.719c-0.09375 0-0.1875-0.015625-0.26562-0.046875-0.39062-0.15625-0.59375-0.59375-0.45312-1l7.4531-19.656c0.15625-0.39062 0.59375-0.59375 0.98438-0.45312 0.39062 0.15625 0.59375 0.59375 0.45312 1l-7.4531 19.656c-0.125 0.3125-0.42188 0.5-0.71875 0.5z" />
                    <path d="m38.578 52.203c-0.20312 0-0.40625-0.078125-0.54688-0.23438-0.29688-0.3125-0.29688-0.79688 0.015625-1.0938l5.9219-5.7656-5.9375-5.8281c-0.29688-0.29688-0.3125-0.78125-0.015625-1.0938 0.29688-0.29688 0.78125-0.3125 1.0938-0.015625l6.4844 6.375c0.14062 0.14062 0.23438 0.34375 0.23438 0.54688s-0.078125 0.40625-0.23438 0.54688l-6.4844 6.3125c-0.14062 0.17188-0.32812 0.25-0.53125 0.25z" />
                    <path d="m61.781 35.359h-5.4844c-0.42188 0-0.76562-0.34375-0.76562-0.76562s0.34375-0.76562 0.76562-0.76562h5.4844c0.42188 0 0.76562 0.34375 0.76562 0.76562s-0.34375 0.76562-0.76562 0.76562z" />
                    <path d="m73.891 35.359h-7c-0.42188 0-0.76562-0.34375-0.76562-0.76562s0.34375-0.76562 0.76562-0.76562h7c0.42188 0 0.76562 0.34375 0.76562 0.76562s-0.34375 0.76562-0.76562 0.76562z" />
                    <path d="m68.438 40.719h-12.141c-0.42188 0-0.76562-0.34375-0.76562-0.76562s0.34375-0.76562 0.76562-0.76562h12.141c0.42188 0 0.76562 0.34375 0.76562 0.76562s-0.34375 0.76562-0.76562 0.76562z" />
                    <path d="m79.594 40.719h-6.6875c-0.42188 0-0.76562-0.34375-0.76562-0.76562s0.34375-0.76562 0.76562-0.76562h6.6875c0.42188 0 0.76562 0.34375 0.76562 0.76562s-0.34375 0.76562-0.76562 0.76562z" />
                    <path d="m61.781 46.062h-5.4844c-0.42188 0-0.76562-0.34375-0.76562-0.76562s0.34375-0.76562 0.76562-0.76562h5.4844c0.42188 0 0.76562 0.34375 0.76562 0.76562s-0.34375 0.76562-0.76562 0.76562z" />
                    <path d="m78.25 45.859h-12.062c-0.42188 0-0.76562-0.34375-0.76562-0.76562s0.34375-0.76562 0.76562-0.76562h12.062c0.42188 0 0.76562 0.34375 0.76562 0.76562s-0.34375 0.76562-0.76562 0.76562z" />
                    <path d="m68.922 51.25h-12.625c-0.42188 0-0.76562-0.34375-0.76562-0.76562s0.34375-0.76562 0.76562-0.76562h12.625c0.42188 0 0.76562 0.34375 0.76562 0.76562s-0.34375 0.76562-0.76562 0.76562z" />
                    <path d="m79.969 51.25h-6.7344c-0.42188 0-0.76562-0.34375-0.76562-0.76562s0.34375-0.76562 0.76562-0.76562h6.7344c0.42188 0 0.76562 0.34375 0.76562 0.76562 0.015625 0.42188-0.32812 0.76562-0.76562 0.76562z" />
                    <path d="m62.141 56.578h-5.8438c-0.42188 0-0.76562-0.34375-0.76562-0.76562s0.34375-0.76562 0.76562-0.76562h5.8438c0.42188 0 0.76562 0.34375 0.76562 0.76562s-0.34375 0.76562-0.76562 0.76562z" />
                    <path d="m74.594 56.578h-7.9375c-0.42188 0-0.76562-0.34375-0.76562-0.76562s0.34375-0.76562 0.76562-0.76562h7.9375c0.42188 0 0.76562 0.34375 0.76562 0.76562s-0.34375 0.76562-0.76562 0.76562z" />
                    <path d="m93.797 83.297h-87.594c-3.4219 0-6.2031-2.7812-6.2031-6.2031v-4.1719c0-0.42188 0.34375-0.76562 0.76562-0.76562h36.469c0.42188 0 0.76562 0.34375 0.76562 0.76562s-0.34375 0.76562-0.76562 0.76562h-35.703v3.3906c0 2.5625 2.0938 4.6562 4.6719 4.6562h87.578c2.5781 0 4.6719-2.0938 4.6719-4.6562v-3.3906h-35.703c-0.42188 0-0.76562-0.34375-0.76562-0.76562s0.34375-0.76562 0.76562-0.76562h36.484c0.42188 0 0.76562 0.34375 0.76562 0.76562v4.1719c0 3.4219-2.7812 6.2031-6.2031 6.2031z" />
                    <path d="m93.109 73.703c-0.42188 0-0.76562-0.34375-0.76562-0.76562v-53.156c0-0.84375-0.6875-1.5312-1.5312-1.5312h-81.875c-0.84375 0-1.5312 0.6875-1.5312 1.5312v53.141c0 0.42188-0.34375 0.76562-0.76562 0.76562s-0.76562-0.34375-0.76562-0.76562v-53.141c0-1.6875 1.375-3.0625 3.0625-3.0625h81.875c1.6875 0 3.0625 1.375 3.0625 3.0625v53.141c0 0.4375-0.34375 0.78125-0.76562 0.78125z" />
                    <path d="m61.328 77.172h-22.688c-0.59375 0-1.125-0.375-1.2812-0.92188l-0.875-3.0938c-0.10938-0.40625 0.125-0.82812 0.53125-0.95312 0.40625-0.10938 0.82812 0.125 0.95312 0.53125l0.82812 2.9062h22.391l0.82812-2.9062c0.10938-0.40625 0.54688-0.65625 0.95312-0.53125 0.40625 0.10938 0.64062 0.54688 0.53125 0.95312l-0.875 3.0938c-0.17188 0.53125-0.70312 0.92188-1.2969 0.92188z" />
                    <path d="m86.203 67.406h-72.672c-0.75 0-1.3594-0.60938-1.3594-1.3594v-41.688c0-0.75 0.60938-1.3594 1.3594-1.3594h72.672c0.75 0 1.3594 0.60938 1.3594 1.3594v41.688c0 0.75-0.60938 1.3594-1.3594 1.3594zm-72.484-1.5469h72.312v-41.312h-72.312z" />
                  </svg>

                <svg viewBox="0 0 100 110" className={`${index == 2 ? 'block' : 'hidden'} w-20 h-20 fill-current text-white`}>
                  <path d="M24.241,15.61A13.344,13.344,0,1,0,37.584,28.954,13.359,13.359,0,0,0,24.241,15.61ZM13.048,28.954A11.21,11.21,0,0,1,22.6,17.882V40.025A11.209,11.209,0,0,1,13.048,28.954ZM24.754,40.133V31.041l7.728,5.477A11.163,11.163,0,0,1,24.754,40.133ZM33.78,34.8l-9.026-6.4V17.775A11.185,11.185,0,0,1,33.78,34.8ZM47.333,48.24H40.958a1.075,1.075,0,0,0-1.075,1.076V60.289a1.075,1.075,0,0,0,1.075,1.075h6.375a1.075,1.075,0,0,0,1.075-1.075V49.316A1.075,1.075,0,0,0,47.333,48.24ZM46.257,59.213H42.034V50.391h4.223Zm-2.111-17.66A4.034,4.034,0,0,0,47.7,35.6l5.852-5.6a4.031,4.031,0,0,0,5.453-1.271l4.055,1.278c0,.047,0,.1,0,.143a4.037,4.037,0,1,0,7.588-1.92L76.508,22.6a4.036,4.036,0,1,0-1.491-1.55l-5.865,5.637a4.03,4.03,0,0,0-5.444,1.276l-4.055-1.278c0-.047,0-.095,0-.143a4.038,4.038,0,1,0-7.592,1.912L46.213,34.05a4.036,4.036,0,1,0-2.067,7.5ZM78.567,17.245a1.886,1.886,0,1,1-1.886,1.885A1.888,1.888,0,0,1,78.567,17.245ZM67.093,28.273a1.886,1.886,0,1,1-1.885,1.886A1.888,1.888,0,0,1,67.093,28.273ZM55.619,24.657a1.886,1.886,0,1,1-1.885,1.886A1.888,1.888,0,0,1,55.619,24.657ZM44.146,35.63a1.886,1.886,0,1,1-1.886,1.886A1.887,1.887,0,0,1,44.146,35.63ZM36.064,48.467a1.075,1.075,0,0,1-1.075,1.075h-21.5a1.076,1.076,0,0,1,0-2.151h21.5A1.075,1.075,0,0,1,36.064,48.467Zm0,6.114a1.075,1.075,0,0,1-1.075,1.076h-21.5a1.076,1.076,0,0,1,0-2.151h21.5A1.075,1.075,0,0,1,36.064,54.581Zm0,6.115a1.075,1.075,0,0,1-1.075,1.076h-21.5a1.076,1.076,0,0,1,0-2.151h21.5A1.075,1.075,0,0,1,36.064,60.7ZM64.8,51.72A10.776,10.776,0,1,0,75.577,62.5,10.788,10.788,0,0,0,64.8,51.72Zm0,19.4A8.625,8.625,0,1,1,73.425,62.5,8.634,8.634,0,0,1,64.8,71.12ZM93.874,86.138,84.1,76.365a3.813,3.813,0,0,0-2.182-1.082L77.026,70.39a14.381,14.381,0,0,0,1.054-1.934h5.068a7.1,7.1,0,0,0,7.1-7.1V14.4a7.1,7.1,0,0,0-7.1-7.1H12.1A7.1,7.1,0,0,0,5,14.4V61.36a7.1,7.1,0,0,0,7.1,7.1H35.207L32.243,79.517h-2A6.6,6.6,0,0,0,23.655,86.1v5.511a1.075,1.075,0,0,0,1.076,1.075H70.515a1.075,1.075,0,0,0,1.076-1.075V86.1A6.6,6.6,0,0,0,65,79.517H63l-.723-2.7a14.718,14.718,0,0,0,2.521.222,14.549,14.549,0,0,0,7.893-2.321l4.895,4.895A3.818,3.818,0,0,0,78.67,81.8l9.773,9.773a3.84,3.84,0,0,0,5.431-5.431ZM76.456,53.781V32.006h4.223V59.213h-1.7A14.4,14.4,0,0,0,76.456,53.781ZM7.154,61.36V14.4A4.951,4.951,0,0,1,12.1,9.459H83.148A4.951,4.951,0,0,1,88.093,14.4V61.36a4.95,4.95,0,0,1-4.945,4.945h-4.3a14.607,14.607,0,0,0,.506-3.809c0-.38-.019-.757-.048-1.132h2.449a1.075,1.075,0,0,0,1.076-1.075V30.93a1.075,1.075,0,0,0-1.076-1.076H75.38A1.076,1.076,0,0,0,74.3,30.93V51.481a14.425,14.425,0,0,0-2.948-1.98V41.959a1.075,1.075,0,0,0-1.075-1.076H63.906a1.076,1.076,0,0,0-1.076,1.076v6.12a14.445,14.445,0,0,0-2.948.713V38.343a1.075,1.075,0,0,0-1.075-1.076H52.432a1.075,1.075,0,0,0-1.075,1.076V56.908a14.634,14.634,0,0,0-.6,9.4H12.1A4.95,4.95,0,0,1,7.154,61.36ZM69.205,48.622a14.583,14.583,0,0,0-4.223-.674V43.034h4.223ZM54.511,52.206q-.533.534-1,1.112v-13.9h4.223V49.774A14.6,14.6,0,0,0,54.511,52.206ZM69.44,86.1v4.435H25.807V86.1a4.441,4.441,0,0,1,4.435-4.436H65A4.441,4.441,0,0,1,69.44,86.1Zm-8.664-6.587H34.47l2.964-11.061H51.522a14.562,14.562,0,0,0,8.362,7.733Zm-4.744-8.253a12.4,12.4,0,1,1,17.537,0A12.319,12.319,0,0,1,56.032,71.264ZM75.09,72.785c.216-.216.422-.439.623-.666L79.4,75.8a3.706,3.706,0,0,0-1.289,1.289l-3.682-3.682C74.65,73.208,74.874,73,75.09,72.785ZM92.353,90.048a1.7,1.7,0,0,1-2.389,0l-9.773-9.773a1.689,1.689,0,0,1,2.389-2.389l9.773,9.773a1.7,1.7,0,0,1,0,2.389Z" />
                </svg>

              </div>
                            
              <p className="uppercase text-center my-4 text-lg font-bold tracking-wider text-truncate wrap-text">{item.title}</p>

              <p className="mb-4 font-normal font-montserrat">{item.description}</p>

              <h3 className="uppercase text-center mb-4 text-lg font-bold tracking-wider">SKILLS &amp; TOOLS</h3>

              <div className="flex flex-row flex-wrap mb-1 justify-items-center justify-center gap-4">

                {item.tags.map((tag, index) => (

                  <Tag key={index} name={tag} className="px-6 py-3 rounded-full bg-black text-white"/>

                ))}

              </div>

              <p className="mt-8">Click to see projects</p>

            </div>

          ))}

      </div>

      <div className="flex flex-row gap-x-6 lg:hidden">
        <div className={`w-4 h-4 rounded-full ${activeIndex == 0 ? colorActive : colorActive}`}></div>
        <div className={`w-4 h-4 relative flex items-center justify-content-center x-shape ${activeIndex == 1 ? `before:${colorActive} after:${colorActive}` : `before:${colorActive} after:${colorActive}`}`}></div>
        <div className={`w-4 h-4 ${activeIndex == 2 ? colorActive : colorActive}`}></div>
        </div>
    </div>
  );
}
